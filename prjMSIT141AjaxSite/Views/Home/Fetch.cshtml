
@{
    ViewData["Title"] = "Fetch";
}

<h1>Fetch</h1>
<img id="img1"/>
@section Scripts{ 
    <script>
      // console.log(fetch('@Url.Content("~/api/index")'));  //回傳的是Promise物件
        @*fetch('@Url.Content("~/api/index")')
            .then(response => {
                //console.log(response);
                //console.log(response.ok);  //true
                //console.log(response.status); //200
                //console.log(response.headers.get('date'));
                //console.log(response.headers.get('content-type'));
                //console.log(response.body);
                //console.log(response.text()); //得到又是另外一個promise物件
                if (!response.ok) throw new Error(response.statusText);
                return response.text();  //純文字  response.json();
            })
            .then(data => {
                console.log(data);
            })
            .catch(error => {
                console.log(error);
            })*@
        fetch('@Url.Content("~/api/GetImageBytes/6")')
            .then(response => response.blob())
            .then(datas => {
                const myImg = document.querySelector("#img1");
                myImg.src = URL.createObjectURL(datas);
            })
    </script>
}
